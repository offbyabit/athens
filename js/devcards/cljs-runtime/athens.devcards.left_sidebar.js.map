{"version":3,"sources":["athens/devcards/left_sidebar.cljs"],"mappings":"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","names":["athens.devcards.left-sidebar/log","js/console.log","athens.devcards.left-sidebar/trace","x","posh.reagent/posh!","athens.db/dsdb","athens.devcards.left-sidebar/left-sidebar","favorites","G__47906","G__47907","posh.reagent/q","sorted-favorites","cljs.core/deref","cljs.core.into.cljs$core$IFn$_invoke$arity$2","cljs.core.sort_by.cljs$core$IFn$_invoke$arity$2","cljs.core/first","G__47908","athens.style/+left-sidebar","iter__4582__auto__","s__47910","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__47912","cljs.core/chunk-buffer","i__47911","vec__47913","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__47909","cljs.core/chunk-rest","vec__47916","cljs.core/cons","cljs.core/rest","_order","title","bid","devcards.core/register-card","devcards.core/card-base","js/athens","js/athens.devcards","js/athens.devcards.left-sidebar","js/athens.devcards.left-sidebar.t_athens$devcards$left_sidebar47919","athens.devcards.left-sidebar/t_athens$devcards$left_sidebar47919","_47921","meta47920","cljs.core/PROTOCOL_SENTINEL","this__46709__auto__","devcard-opts__46710__auto__","cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic","v__46728__auto__","cljs.core/fn?","data-atom__46729__auto__","owner__46730__auto__","reagent.core/as-element","cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic","devcards.core/assert-options-map","this__4428__auto__","writer__4429__auto__","opt__4430__auto__","cljs.core/-write","athens.devcards.left-sidebar/->t_athens$devcards$left_sidebar47919","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$variadic","athens.devcards.left-sidebar/load-db","c__39615__auto__","cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1","cljs.core.async.impl.dispatch/run","f__39616__auto__","switch__39592__auto__","state_47960","state_val_47961","statearr-47962","inst_47923","inst_47924","inst_47925","cljs.core/PersistentHashMap","inst_47926","cljs.core.async.impl.ioc-helpers/take!","statearr-47963","inst_47956","statearr-47964","statearr-47965","inst_47928","inst_47933","inst_47934","inst_47935","inst_47936","inst_47937","statearr-47966","statearr-47967","inst_47951","inst_47953","inst_47954","statearr-47968","inst_47930","inst_47931","cljs.core/not","statearr-47969","statearr-47970","statearr-47971","inst_47949","inst_47950","cljs.core.get.cljs$core$IFn$_invoke$arity$2","statearr-47972","statearr-47973","statearr-47974","inst_47946","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","statearr-47975","inst_47944","statearr-47976","statearr-47977","inst_47958","cljs.core.async.impl.ioc-helpers/return-chan","statearr-47978","inst_47941","statearr-47979","statearr-47980","state-machine__39593__auto__","ret-value__39594__auto__","result__39595__auto__","cljs.core/keyword-identical?","e47981","js/Object","ex__39596__auto__","statearr-47982","cljs.core.async.impl.ioc-helpers/process-exception","state__39617__auto__","statearr-47983","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs_http.client.get.cljs$core$IFn$_invoke$arity$variadic","athens.db/athens-url","posh.reagent/transact!","athens.db/str-to-db-tx","js/alert","athens.devcards.left-sidebar/-main","cljs.core/chunk-first"],"sourcesContent":["(ns athens.devcards.left-sidebar\n  (:require\n    [athens.db :as db]\n    [cljsjs.react]\n    [cljsjs.react.dom]\n    [cljs.core.async :refer [go <!]]\n    [devcards.core :refer [defcard defcard-rg]]\n    [reagent.core :as rg]\n    [posh.reagent :refer [pull q posh! transact!]]\n    [datascript.core :as d]\n    [cljs-http.client :as http]\n    [athens.style :as style]))\n\n(def log js/console.log)\n\n(defn trace\n  [x]\n  (log x) x)\n\n(posh! db/dsdb)\n\n(defn left-sidebar\n  \"TODO: Don't know how we want to handle global subscriptions or dispatches (i.e. routing) now that we are in reagent\"\n  []\n  (let [favorites (q '[:find ?order ?title ?bid\n                       :where\n                       [?e :page/sidebar ?order]\n                       [?e :node/title ?title]\n                       [?e :block/uid ?bid]]\n                     db/dsdb)\n        sorted-favorites (->> @favorites\n                              (into [])\n                              (sort-by first))\n        ;;current-route (subscribe [:current-route])\n        ]\n    [:div {:style {:margin \"0 10px\" :max-width 250}}\n     ;;[:div [:a {:href (rfee/href :pages)} \"All /pages\"]]\n     ;;[:div [:span {:style {}} \"Current Route: \" [:b (-> @current-route :path)]]]\n     [:div {:style {:border-bottom \"1px solid gray\" :margin \"10px 0\"}}]\n     [:ul (style/+left-sidebar {})\n      (for [[_order title bid] sorted-favorites]\n        ;;^{:key bid} [:li [:a {:href (rfee/href :page {:id bid})} title]]\n        ^{:key bid} [:li [:span title]])\n      ]]))\n\n(defcard-rg left-sidebar\n  [left-sidebar])\n\n(defcard athens-dsdb\n  \"Indices are omitted because they include all the datoms\n  Could probably use this and `load-db` as generic helpers for any componenets that use posh.\"\n  (dissoc @db/dsdb :eavt :aevt :avet))\n\n(defn load-db\n  []\n  (go\n    (let [res (<! (http/get db/athens-url {:with-credentials? false}))\n          {:keys [success body]} res]\n      (if success\n        (transact! db/dsdb (db/str-to-db-tx body))\n        (js/alert \"Failed to retrieve data from GitHub\")))))\n\n\n(defn -main []\n  (load-db))\n(-main)"]}